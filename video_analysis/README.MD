æœ¬å°ˆæ¡ˆæä¾› ç¡¬èˆ‰å§¿å‹¢å³æ™‚åˆ¤æ–· APIï¼Œå¯è®“å‰ç«¯ï¼ˆJS / Browser / Mobileï¼‰é€éé¡é ­æˆ–å½±ç‰‡è¼¸å…¥ Mediapipe Pose çš„ 33 å€‹éª¨æ¶é»ï¼Œä¸¦ç”±æ¨¡å‹åˆ†ææ˜¯å¦å­˜åœ¨éŒ¯èª¤å‹•ä½œã€‚

æ¨¡å‹è¨“ç·´ä½¿ç”¨ èšåˆç‰¹å¾µï¼ˆmean/max/min/stdï¼‰ï¼Œä¸¦æ¡ç”¨ RandomForestClassifierã€‚

API æ”¯æ´ï¼š

å³æ™‚é€å¹€åˆ†æ

æ»‘å‹•è¦–çª—ï¼ˆ30 framesï¼‰

å›å‚³å§¿å‹¢éŒ¯èª¤æ¨™ç±¤

å¤šä½¿ç”¨è€… Session è™•ç†

å¯éƒ¨ç½²æ–¼ä»»ä½•é›²ç«¯æœå‹™ï¼ˆRenderã€Railwayã€GCPã€AWS ç­‰ï¼‰

ğŸ“ å°ˆæ¡ˆæ¶æ§‹
project/
â”‚â”€â”€ api_server.py          # FastAPI ä¸»ç¨‹å¼
â”‚â”€â”€ deadlift_rf_model.pkl  # è¨“ç·´å¾Œçš„æ¨¡å‹
â”‚â”€â”€ label_binarizer.pkl    # MultiLabelBinarizer
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ README.md

ğŸ“¦ å®‰è£ç’°å¢ƒ
1ï¸âƒ£ å»ºç«‹è™›æ“¬ç’°å¢ƒï¼ˆå»ºè­°ï¼‰
python3.10 -m venv .venv
.venv\Scripts\activate           # Windows

2ï¸âƒ£ å®‰è£å¥—ä»¶
pip install -r requirements.txt


ğŸš€ å•Ÿå‹• API Server
uvicorn api_server:app --reload --host 0.0.0.0 --port 8000


API å°‡åœ¨ï¼š

http://localhost:8000

ğŸ§  API æ¶æ§‹æ¦‚å¿µ

æ¨¡å‹åœ¨è¨“ç·´éšæ®µä½¿ç”¨ï¼š

æ¯å¹€ 13 ç¶­ç‰¹å¾µ

èšåˆæˆ 36 ç¶­ç‰¹å¾µï¼ˆmean/max/min/stdï¼‰

å› æ­¤ API å¿…é ˆï¼š

æ”¶åˆ°å‰ç«¯çš„ 33 å€‹ Mediapipe Landmarks

å–å‡ºè¨“ç·´æ‰€éœ€çš„é—œéµé»ï¼ˆè€³ã€è‚©ã€é«–ã€è†ã€è¸â€¦ï¼‰

è¨ˆç®—å–®å¹€ç‰¹å¾µï¼ˆ13 ç¶­ï¼‰

ä¿å­˜åˆ° session çš„æ»‘å‹•è¦–çª—ï¼ˆ30 å¹€ï¼‰

æ»¿ 30 å¹€å¾Œ â†’ ç”¢ç”Ÿ 36 ç¶­èšåˆç‰¹å¾µ â†’ ä¸Ÿçµ¦æ¨¡å‹æ¨è«–

ğŸ“¡ API è¦æ ¼
POST /predict

å‰ç«¯æ¯å¹€å‚³é€éª¨æ¶é»ï¼š

Request Body
{
  "session_id": "user_123",
  "landmarks": [
    {"x":0.1,"y":0.2,"z":-0.3},
    ...
  ]
}

Response æ ¼å¼ï¼ˆA / D / Eï¼‰
{
  "A": ["èƒŒéƒ¨å½æ›²", "å•Ÿå‹•å§¿å‹¢éŒ¯èª¤"],
  "D": true,
  "E": null
}


èªªæ˜ï¼š

æ¬„ä½	æ„ç¾©
A	æ¨¡å‹åµæ¸¬åˆ°çš„éŒ¯èª¤å‹•ä½œï¼ˆç©ºé™£åˆ— = æ­£ç¢ºå‹•ä½œï¼‰
D	API æœ‰æˆåŠŸé‹è¡Œ
E	éŒ¯èª¤è¨Šæ¯ï¼ˆå¦‚ï¼šInsufficientFrames, LandmarkMissingï¼‰
ğŸ¥ å‰ç«¯ JS ä½¿ç”¨ç¤ºä¾‹ï¼ˆMediapipe + APIï¼‰

ä»¥ä¸‹ç‚ºæœ€ç°¡ç¤ºä¾‹ï¼š

async function sendFrame(landmarks) {
  const body = {
    session_id: "user1",
    landmarks: landmarks
  };

  const res = await fetch("https://your-api.com/predict", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(body)
  });

  const data = await res.json();
  console.log("Result:", data);
}

â˜ï¸ é›²ç«¯éƒ¨ç½²æŒ‡å—
é©ç”¨å¹³å°ï¼š

Render

Railway

Google Cloud Run

AWS EC2 / ECS

Azure Container Apps

è‹¥ä½¿ç”¨ Dockerï¼š

Dockerfile

FROM python:3.10

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["uvicorn", "api_server:app", "--host", "0.0.0.0", "--port", "8080"]


åŸ·è¡Œï¼š

docker build -t deadlift-api .
docker run -p 8080:8080 deadlift-api

ğŸ§ª æ¸¬è©¦æ–¹å¼
æœ¬åœ°æ¸¬è©¦
curl -X POST "http://localhost:8000/predict" \
     -H "Content-Type: application/json" \
     -d "{\"session_id\":\"test\", \"landmarks\":[{\"x\":0,\"y\":0,\"z\":0}]}"


ï¼ˆæ³¨æ„ï¼šéœ€è¦å®Œæ•´ 33 å€‹ landmark æ‰èƒ½é‹ä½œï¼‰